## Описание
Проект представляет из себя CRUD API для работы с публикациями и комментариями. \
Для хранения информации используется postgresql и библиотека pgx, для работы с миграциями используется goose.\
В качестве маршрутизатора - gorilla/mux. \
Логгер в проекте вынесен в отдельный от основной программы сервис, общение с которым происходит посредством брокера сообщений kafka, для работы с которой используется пакет IBM/sarama. \
Код покрыт unit  и интеграционными тестами.
## Запуск
Поднять окружения для работы проекта:
```
 make docker-up
 make test-migration-up
```
Программу можно запустить с помощью следующей команды (сервер запускается на порту :9000):
```
go run cmd/main.go
```
Запустить unit и интеграционные тесты можно командами:
```
make unit-test
make integration-test
```
## Поддерживаемые методы с примерами

1. Создание поста (Create) \
```curl -X POST localhost:9000/post -d '{"id":1,"body":"hello"}' ``` 
2. Создание комментария  
```curl -X POST localhost:9000/comment -d '{"id":1, "postId":1, "body":"hello"}' -i```
3. Запрос поста (GetById)  (Выводит json включающий в себа комментарий) \
```curl -X GET localhost:9000/post?id=1 -i``` 
4. Обновление поста (Update) \
```curl -X PATCH localhost:9000/post -d '{"id":1, "body":"hello2"}' -i``` 
5. Удаление поста (в том числе каскадное удаление коментариев) \
```curl -X DELETE localhost:9000/post?id=1 -i``` 
